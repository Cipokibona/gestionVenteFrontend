<div class="container justify-content-center">
    <h5 class="text-center">Vente</h5>
    <div class="row">
        <form class="needs-validation">
            <div class="ms-auto me-auto mb-2">
                <label for="nameClient" class="visually-hidden">Full name</label>
                <input type="text" class="form-control" name="nameClient" id="nameClient" placeholder="{{dataClient.fullName}}" disabled>
            </div>
            @if (agentBasket) {
            <div class="container border p-2 rounded">
                <h5>Panier</h5>
                <select class="form-select mb-2" aria-label="Default select example" name="panier" (change)="selectBasket($event)">
                    <option selected>Selectionner le panier</option>
                    @for (basket of agentBasket; track basket.id) {
                    <option value={{basket.id}}>Pris dans {{basket.depot_name}}</option>
                }
                </select> @if(selectedBasketData){ @for (item of tabProducts; track $index) {
                <h4 for="product">Product {{$index + 1}}</h4>
                <select class="form-select mb-2" aria-label="Default select example" (change)="selectProduct($event, $index)" [disabled]="tabProducts[$index + 1]">
                    <option selected>Choisit un produit</option>
                    @for (product of selectedBasketData.list_product; track product.id) {
                    <option value={{product.id}}>{{product.product_name}}</option>}
                </select> @if (selectedProductData[$index]) {
                <div class="col-auto mb-2">
                    <label for="quantity" class="visually">Quantity (max:{{selectedProductData[$index].quantity}})</label>
                    <input type="number" class="form-control" max="{{selectedProductData[$index].quantity}}" name="quantity" id="quantity" placeholder="Quantity" value=1 [disabled]="tabProducts[$index + 1]" required>
                </div>
                <div class="col-auto mb-2">
                    <label for="pureel" class="visually">PU reel en Bif</label>
                    <input type="number" class="form-control" name="pureel" id="pureel" [disabled]="tabProducts[$index + 1]" required>
                    <p class="text-secondary">
                        Prix unitaire officiel:
                        <span class="text-danger">
                            {{selectedProductData[$index].pricePerUnitOfficiel}} Bif
                        </span>
                    </p>
                </div>
                <div class="col">
                    <button type="button" class="btn button secondary rounded-pill m-1 p-1" (click)="addProduct(selectedProductData[$index],$index)" [disabled]="tabProducts[$index + 1]">
                         + Save
                    </button>
                    <button type="button" class="btn btn-danger rounded-pill m-1 p-1" (click)="removeProduct(selectedProductData[$index])">
                        Delete
                    </button>
                </div>
                }}}
            </div>}
            <!-- } @for (item of tabProducts; track $index) {
            <div class="container border p-2 rounded">
                <h6>Product {{$index + 1}}</h6>
                @if (agentBasket) {
                <label for="panier">Panier</label>
                <select class="form-select mb-2" aria-label="Default select example" name="panier" (change)="selectBasket($event)">
                    <option selected>Selectionner le panier</option>
                    @for (basket of agentBasket; track basket.id) {
                    <option value={{basket.id}}>Pris dans {{basket.depot_name}}</option>
                }
                </select>}@if(selectedBasketData){
                <label for="product">Product</label>
                <select class="form-select mb-2" aria-label="Default select example">
                    <option selected>Choisit un produit</option>
                    @for (product of selectedBasketData.list_product; track product.id) {
                    <option value={{product.id}}>{{product.product_name}}</option>}
                </select>}
                <div class="row">
                    <div class="col-auto mb-2">
                        <label for="quantity" class="visually">Quantity</label>
                        <input type="number" class="form-control" name="quantity" id="quantity" placeholder="Quantity" value=1 required>
                    </div>
                    <div class="col-auto mb-2">
                        <label for="pureel" class="visually">PU reel en Bif</label>
                        <input type="number" class="form-control" name="pureel" id="pureel" value=3000 required>
                        <p class="text-secondary">
                            Prix unitaire officiel:
                            <span class="text-danger">
                            3000 Bif
                        </span>
                        </p>
                    </div>
                    <div class="col-auto mb-2">
                        <label for="montantPaye" class="visually">Montant paye</label>
                        <input type="number" class="form-control" name="montantPaye" id="montantPaye" placeholder="Montant paye" required>
                        <p class="text-secondary">
                            Prix total officiel:
                            <span class="text-danger">
                                30000 Bif
                            </span> <br> Prix total pour le client:
                            <span class="text-danger">
                            20000 Bif
                        </span>
                        </p>
                    </div>
                </div>
                <div class="row text-end">
                    <div class="col">
                        <button type="button" class="btn btn-danger rounded-pill m-1 p-1" data-bs-toggle="modal" data-bs-target="#createClient">
                            Delete
                        </button>
                    </div>
                </div> -->
            <!-- </div>} -->
            <div class="row">
                <!-- <div class="col">
                    <button type="button" class="button secondary rounded-pill m-1 p-1" (click)="addProduct()">
                         + Add
                    </button>
                    <button type="button" class="btn btn-danger rounded-pill m-1 p-1" (click)="removeProduct()">
                        Delete
                    </button>
                </div> -->
                <div class="container">
                    <h6>Mode de payement du client</h6>
                    @for (item of tabModePay; track $index) {
                    <div class="row">
                        <div class="col-auto mb-2">
                            <select class="form-select" aria-label="Default select example" (change)="selectedTypeEchange($event,$index)" [disabled]="tabModePay[$index + 1]">
                                <option selected>Mode payement</option>
                                @for (type of typeEchangeData; track type.id) {
                                <option value={{type.id}}>{{type.nom}}</option>}
                            </select>
                        </div>@if (selectedTypeData[$index]) {
                        <div class="col-auto mb-2">
                            <label for="montantCash" class="visually-hidden">montant</label>
                            <input type="number" class="form-control" name="montantCash" id="montantCash" placeholder="montant" [disabled]="tabModePay[$index + 1]" required>
                        </div>@if (selectedTypeData[$index].is_bordereau) {
                        <div class="col-auto mb-2">
                            <label for="numero" class="visually-hidden">Bordereau</label>
                            <input type="text" class="form-control" name="numero" id="numero" placeholder="bordereau" [disabled]="tabModePay[$index + 1]" required>
                        </div>}}
                        <div class="col">
                            <button type="button" class="btn button secondary rounded-pill m-1 p-1" (click)="addModePay(selectedTypeData[$index],$index)" [disabled]="tabModePay[$index + 1]">
                                + save
                            </button>
                            <button type=" button " class="btn btn-danger rounded-pill m-1 p-1" (click)="removeModePay($index)">
                                Delete
                            </button>
                        </div>
                    </div>}
                </div>
                <p class="text-secondary ">
                    Totaux officiel:
                    <span class="text-danger ">
                        30000 Bif
                    </span> <br> Totaux du client:
                    <span class="text-danger ">
                        30000 Bif
                    </span> <br> Montant paye:
                    <span class="text-danger ">
                        30000 Bif
                    </span> <br> Reste:
                    <span class="text-danger ">
                        30000 Bif
                    </span> <br> Date prevu de payement:
                    <input type="date " name="datePrevu " id="datePrevu " class="form-control w-25 "><br>
                </p>
            </div>
            <div class="ms-auto me-auto mb-2 mt-3 ">
                <button type=" " class="button principal p-1 m-1 ">
                    <span class="ms-5 me-5 ">Vente</span>
               </button>
                <!-- <a class="button secondary p-1 m-1 ">
                    <span class="ms-5 me-5 ">Back</span>
                </a> -->
            </div>
        </form>
    </div>
</div>